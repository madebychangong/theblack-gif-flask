# ================================================
# ğŸ”§ Leapcell ë°°í¬ ì„¤ì • íŒŒì¼
# ================================================
# ì´ íŒŒì¼ì€ í”„ë¡œì íŠ¸ ë£¨íŠ¸ í´ë”ì— ì €ì¥í•˜ì„¸ìš”!

[app]
# í”„ë¡œì íŠ¸ ê¸°ë³¸ ì •ë³´
name = "theblack-gif-generator"
description = "THE BLACK SHOP ë””ì•„ë¸”ë¡œ4 ì• ë‹ˆë©”ì´ì…˜ GIF ìƒì„±ê¸°"

[build]
# Python ë²„ì „ ì„¤ì • (Playwright í˜¸í™˜ì„±)
runtime = "python:3.10"

# ğŸ”§ ë¹Œë“œ ëª…ë ¹ì–´ (íŒ¨í‚¤ì§€ ì„¤ì¹˜ + Playwright ë¸Œë¼ìš°ì € ì„¤ì¹˜)
build_command = """
pip install -r requirements.txt && \
playwright install chromium && \
playwright install-deps chromium
"""

# ğŸš€ ì„œë²„ ì‹œì‘ ëª…ë ¹ì–´ (gunicorn ì‚¬ìš©)
start_command = "gunicorn --bind 0.0.0.0:$PORT --workers 1 --timeout 120 app:app"

[resources]
# ğŸ§  ë©”ëª¨ë¦¬ ì„¤ì • (Playwright ë¸Œë¼ìš°ì € ë•Œë¬¸ì— ë„‰ë„‰í•˜ê²Œ)
memory = "1024MB"

# âš¡ CPU ì„¤ì • 
cpu = "1000m"  # 1 vCPU

# â±ï¸ íƒ€ì„ì•„ì›ƒ ì„¤ì • (GIF ìƒì„± ì‹œê°„ ê³ ë ¤)
timeout = "300s"  # 5ë¶„

[environment]
# ğŸŒ í™˜ê²½ë³€ìˆ˜ ì„¤ì • (Supabase ì •ë³´)
# ì£¼ì˜: ì‹¤ì œ ê°’ì€ Leapcell ì›¹ ëŒ€ì‹œë³´ë“œì—ì„œ ì„¤ì •í•´ì•¼ í•©ë‹ˆë‹¤!
SUPABASE_URL = "https://ssnmitgehgzzcpmqwhzt.supabase.co"
SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNzbm1pdGdlaGd6emNwbXF3aHp0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNjI1MDgsImV4cCI6MjA2ODkzODUwOH0.u3FrSDh5qYeccQmn0PkOs4nfqIhXLSFHhpWj2JXhTrA"

# ğŸ­ Playwright ì„¤ì •
PLAYWRIGHT_BROWSERS_PATH = "/tmp/ms-playwright"

# ğŸ Python ì„¤ì •
PYTHONUNBUFFERED = "1"

[scaling]
# ğŸ“Š ìë™ ìŠ¤ì¼€ì¼ë§ ì„¤ì •
min_instances = 0  # ì‚¬ìš©í•˜ì§€ ì•Šì„ ë•ŒëŠ” 0ê°œ (ë¹„ìš© ì ˆì•½)
max_instances = 2  # ìµœëŒ€ 2ê°œ ì¸ìŠ¤í„´ìŠ¤ (Hobby Plan ì œí•œ ê³ ë ¤)

# ğŸ”¥ ìŠ¤ì¼€ì¼ë§ ì¡°ê±´
scale_up_threshold = "70%"    # CPU 70% ì´ìƒì‹œ í™•ì¥
scale_down_threshold = "30%"  # CPU 30% ì´í•˜ì‹œ ì¶•ì†Œ

[health_check]
# â¤ï¸ ì„œë²„ ìƒíƒœ ì²´í¬
path = "/api/health"
interval = "30s"
timeout = "10s"
retries = 3

[logs]
# ğŸ“ ë¡œê·¸ ì„¤ì •
level = "info"
retention = "7d"  # 7ì¼ê°„ ë³´ê´€

[static]
# ğŸ“ ì •ì  íŒŒì¼ ì„¤ì • (index.html, theblack.html ë“±)
enabled = true
directory = "static"
cache_duration = "1h"
